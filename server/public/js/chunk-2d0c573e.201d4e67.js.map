{"version":3,"sources":["webpack:///./src/views/Visualization/vdog-ss-3d.js"],"names":["initPage","_x","_x2","_x3","_x4","_initPage","apply","this","arguments","_callee","NCBIData","myChart","oldNcList","NCBIValues","ncList","ncData","option","regeneratorRuntime","wrap","_context","prev","next","readDataToMatrix","backgroundColor","backColor","tooltip","formatter","obj","value","toolbox","showTitle","feature","saveAsImage","iconStyle","normal","borderColor","textColor","shadowColor","shadowBlur","color","legend","id","top","data","selectedMode","inactiveColor","disableColor","textStyle","fontSize","grid","visualMap","type","dimension","min","minSize","max","maxSize","show","inRange","symbolSize","grid3D","light","main","intensity","ambient","viewControl","autoRotate","autoRotateAfterStill","minDistance","maxDistance","xAxis3D","name","nameTextStyle","axisLine","lineColor","axisLabel","axisPointer","lineStyle","yAxis3D","getColumn","zAxis3D","series","data2Dto3D","Animals","shading","label","itemStyle","borderWidth","emphasis","Plants","Fungi","Protists","Other","setOption","on","params","componentType","seriesType","window","open","stop","data2D","re","Array","i","length","push","ncNumbers","res","getNCBIValues","line"],"mappings":"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","file":"js/chunk-2d0c573e.201d4e67.js","sourcesContent":["import { getColumn, getNCBIValues, backColor, lineColor, textColor, disableColor } from \"./ncbi.js\"\r\n\r\nexport async function initPage(NCBIData, myChart, oldNcList, NCBIValues) {\r\n    let ncList = oldNcList;\r\n    // let schema = [\r\n    //     { name: 'name', index: 0, value: 'Organism/Name' },\r\n    //     { name: 'Group', index: 1, value: 'Group' },\r\n    //     { name: 'SubGroup', index: 2, value: 'SubGroup' },\r\n    //     { name: 'Type', index: 3, value: 'Type' },\r\n    //     { name: 'RefSeq', index: 4, value: 'RefSeq' },\r\n    //     { name: 'INSDC', index: 5, value: 'INSDC' },\r\n    //     { name: 'Size', index: 6, value: 'Size (Kb)' },\r\n    //     { name: 'GC', index: 7, value: 'GC%' },\r\n    //     { name: 'Protein', index: 8, value: 'Protein' },\r\n    //     { name: 'rRNA', index: 9, value: 'rRNA' },\r\n    //     { name: 'tRNA', index: 10, value: 'tRNA' },\r\n    //     { name: 'oRNA', index: 11, value: 'Other RNA' },\r\n    //     { name: 'Gene', index: 12, value: 'Gene' },\r\n    //     { name: 'Pseudogene', index: 13, value: 'Pseudogene' },\r\n    //     { name: 'RDate', index: 14, value: 'Release Date' },\r\n    //     { name: 'MDate', index: 15, value: 'Modify Date' }\r\n    // ];\r\n\r\n    let ncData = readDataToMatrix(NCBIData, ncList, NCBIValues);\r\n\r\n    let option = {\r\n        backgroundColor: backColor,\r\n        tooltip: {\r\n            formatter: function (obj) {\r\n                let value = obj.value;\r\n                return '<div style=\"border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px\">'\r\n                    + value[5]\r\n                    + '</div>'\r\n                    + value[1] + \"<br>Gene : \" + value[2] + \"<br>\"\r\n                    + \"GC : \" + value[0] + \"<br>\" + \"Size : \" + value[3];\r\n            }\r\n        },\r\n        toolbox: {\r\n            showTitle: false,\r\n            feature: {\r\n                saveAsImage: {}\r\n            },\r\n            iconStyle: {\r\n                normal: {\r\n                    borderColor: textColor,\r\n                    shadowColor: 'rgba(0, 0, 0, 0.5)',\r\n                    shadowBlur: 10\r\n                }\r\n            }\r\n        },\r\n        color: ['#fe0300', '#00ff0d', '#f09a09', '#1710c0', '#f5f811'],\r\n        legend: [{\r\n            id: 'dataGroup',\r\n            top: 0,\r\n            data: ['Animals', 'Plants', 'Fungi', 'Protists', 'Other'],\r\n            selectedMode: 'single',\r\n            inactiveColor: disableColor,\r\n            textStyle: {\r\n                color: textColor,\r\n                fontSize: 16\r\n            }\r\n        }],\r\n        grid: {\r\n            top: '10%',\r\n        },\r\n        visualMap: [\r\n            {\r\n                type: 'continuous',\r\n                dimension: 3,\r\n                min: ncData.minSize,\r\n                max: ncData.maxSize,\r\n                show: false,\r\n                inRange: {\r\n                    symbolSize: [10, 100]\r\n                }\r\n            }\r\n        ],\r\n        grid3D: {\r\n            light: {\r\n                main: {\r\n                    intensity: 1.2\r\n                },\r\n                ambient: {\r\n                    intensity: 0.3\r\n                }\r\n            },\r\n            viewControl: {\r\n                autoRotate: true,\r\n                autoRotateAfterStill: 10,\r\n                minDistance: 150,\r\n                maxDistance: 400,\r\n            }\r\n        },\r\n        xAxis3D: {\r\n            type: 'value',\r\n            name: 'GC',\r\n            nameTextStyle: {\r\n                color: textColor\r\n            },\r\n            axisLine: {\r\n                color: lineColor\r\n            },\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: textColor\r\n                }\r\n            },\r\n            axisPointer: {\r\n                lineStyle: {\r\n                    color: disableColor\r\n                }\r\n            }\r\n        },\r\n        yAxis3D: {\r\n            type: 'category',\r\n            name: 'SubGroup',\r\n            data: getColumn(NCBIData, 2, 'all', 'Animals'),\r\n            nameTextStyle: {\r\n                color: textColor\r\n            },\r\n            axisLine: {\r\n                color: lineColor\r\n            },\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: textColor\r\n                }\r\n            },\r\n            axisPointer: {\r\n                lineStyle: {\r\n                    color: disableColor\r\n                }\r\n            }\r\n        },\r\n        zAxis3D: {\r\n            type: 'value',\r\n            name: 'Gene',\r\n            nameTextStyle: {\r\n                color: textColor\r\n            },\r\n            axisLine: {\r\n                color: lineColor\r\n            },\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: textColor\r\n                }\r\n            },\r\n            axisPointer: {\r\n                lineStyle: {\r\n                    color: disableColor\r\n                }\r\n            }\r\n        },\r\n        series: [{\r\n            name: 'Animals',\r\n            type: 'scatter3D',\r\n            data: data2Dto3D(ncData.Animals),\r\n            shading: 'color',\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                borderWidth: 1,\r\n                borderColor: 'rgba(255,255,255,0.3)'\r\n            },\r\n            emphasis: {\r\n                label: {\r\n                    textStyle: {\r\n                        fontSize: 20,\r\n                        color: '#dd4444'\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    color: '#dd4444'\r\n                }\r\n            }\r\n        }, {\r\n            name: 'Plants',\r\n            type: 'scatter3D',\r\n            data: data2Dto3D(ncData.Plants),\r\n            shading: 'color',\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                borderWidth: 1,\r\n                borderColor: 'rgba(255,255,255,0.3)'\r\n            },\r\n            emphasis: {\r\n                label: {\r\n                    textStyle: {\r\n                        fontSize: 20,\r\n                        color: '#dd4444'\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    color: '#dd4444'\r\n                }\r\n            }\r\n        }, {\r\n            name: 'Fungi',\r\n            type: 'scatter3D',\r\n            data: data2Dto3D(ncData.Fungi),\r\n            shading: 'color',\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                borderWidth: 1,\r\n                borderColor: 'rgba(255,255,255,0.3)'\r\n            },\r\n            emphasis: {\r\n                label: {\r\n                    textStyle: {\r\n                        fontSize: 20,\r\n                        color: '#dd4444'\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    color: '#dd4444'\r\n                }\r\n            }\r\n        }, {\r\n            name: 'Protists',\r\n            type: 'scatter3D',\r\n            data: data2Dto3D(ncData.Protists),\r\n            shading: 'color',\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                borderWidth: 1,\r\n                borderColor: 'rgba(255,255,255,0.3)'\r\n            },\r\n            emphasis: {\r\n                label: {\r\n                    textStyle: {\r\n                        fontSize: 20,\r\n                        color: '#dd4444'\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    color: '#dd4444'\r\n                }\r\n            }\r\n        }, {\r\n            name: 'Other',\r\n            type: 'scatter3D',\r\n            data: data2Dto3D(ncData.Other),\r\n            shading: 'color',\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                borderWidth: 1,\r\n                borderColor: 'rgba(255,255,255,0.3)'\r\n            },\r\n            emphasis: {\r\n                label: {\r\n                    textStyle: {\r\n                        fontSize: 20,\r\n                        color: '#dd4444'\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    color: '#dd4444'\r\n                }\r\n            }\r\n        }]\r\n    }\r\n    myChart.setOption(option);\r\n    myChart.on('legendselectchanged', function (params) {\r\n        myChart.setOption({\r\n            yAxis3D: {\r\n                name: 'SubGroup',\r\n                data: getColumn(NCBIData, 2, 'all', params.name)\r\n            }\r\n        })\r\n    });\r\n    myChart.on('click', function (params) {\r\n        if (params.componentType === 'series') {\r\n            if (params.seriesType === 'scatter3D') {\r\n                window.open(\"http://bio.njfu.edu.cn/CPTree/service/cpdata.php?type=vdog&id=\" + params.data.value[6]);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction data2Dto3D(data2D) {\r\n    var re = new Array();\r\n    for (var i = 0; i < data2D.length; i++) {\r\n        re.push([data2D[i][7], data2D[i][2], data2D[i][12], data2D[i][6], data2D[i][1], data2D[i][0], data2D[i][4]]);\r\n    }\r\n    return re;\r\n}\r\n\r\nfunction readDataToMatrix(NCBIData, ncNumbers, NCBIValues) {\r\n    let re = new Array();\r\n\r\n    re[\"Animals\"] = new Array();\r\n    re[\"Plants\"] = new Array();\r\n    re[\"Fungi\"] = new Array();\r\n    re[\"Protists\"] = new Array();\r\n    re[\"Other\"] = new Array();\r\n\r\n    re[\"maxSize\"] = 0;\r\n    re[\"minSize\"] = 65535;\r\n\r\n    let res = NCBIValues ? NCBIValues : getNCBIValues(NCBIData, ncNumbers);\r\n    for (let i = 0; i < res.length; i++) {\r\n        let line = res[i];\r\n        if (+line[6] > re[\"maxSize\"]) re[\"maxSize\"] = +line[6];\r\n        if (+line[6] < re[\"minSize\"]) re[\"minSize\"] = +line[6];\r\n        switch (line[1]) {\r\n            case 'Animals':\r\n                re[\"Animals\"].push(line); break;\r\n            case 'Plants':\r\n                re[\"Plants\"].push(line); break;\r\n            case 'Fungi':\r\n                re[\"Fungi\"].push(line); break;\r\n            case 'Protists':\r\n                re[\"Protists\"].push(line); break;\r\n            case 'Other':\r\n                re[\"Other\"].push(line); break;\r\n        }\r\n\r\n    }\r\n\r\n    return re;\r\n}"],"sourceRoot":""}